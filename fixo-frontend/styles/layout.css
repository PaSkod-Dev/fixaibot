/* 
   FIXƆ - Layout (Grilles et disposition)
   */

/* Conteneur principal */
.conteneur {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--espace-4);
}

/* Grille */
.grille {
  display: grid;
  gap: var(--espace-4);
}

.grille--2 {
  grid-template-columns: repeat(2, 1fr);
}

.grille--3 {
  grid-template-columns: repeat(3, 1fr);
}

.grille--4 {
  grid-template-columns: repeat(4, 1fr);
}

/* Flexbox */
.flex {
  display: flex;
}

.flex--colonne {
  flex-direction: column;
}

.flex--centre {
  align-items: center;
  justify-content: center;
}

.flex--espace-entre {
  justify-content: space-between;
}

.flex--espace-autour {
  justify-content: space-around;
}

.flex--gap {
  gap: var(--espace-4);
}

/* Layout de l'application */
.app {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background-color: var(--couleur-fond);
  transition: background-color 0.3s ease;
}

/* Mode sombre pour l'app */
[data-theme="dark"] .app {
  background-color: var(--dark-couleur-fond);
}

.app__header {
  background-color: var(--couleur-principale);
  color: white;
  padding: var(--espace-4) var(--espace-6);
  box-shadow: var(--ombre-md);
}

.app__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* 
   LAYOUT DU CHAT - STRUCTURE FIXE POUR SCROLL AUTOMATIQUE
   */

/*
  Structure:
  ┌─────────────────────────────────┐
  │         HEADER (fixe)           │  ← Hauteur fixe, ne scroll pas
  ├─────────────────────────────────┤
  │                                 │
  │         MESSAGES                │  ← Zone scrollable (flex: 1)
  │         (scrollable)            │
  │                                 │
  ├─────────────────────────────────┤
  │         INPUT (fixe)            │  ← Hauteur fixe, ne scroll pas
  └─────────────────────────────────┘
*/

.chat-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  height: 100dvh;
  /* Dynamic viewport height pour mobile */
  max-width: 1200px;
  margin: 0 auto;
  background-color: var(--couleur-fond);
  transition: background-color 0.3s ease;
  overflow: hidden;
  /* IMPORTANT: empêche le scroll sur le conteneur parent */
}

[data-theme="dark"] .chat-container {
  background-color: var(--dark-couleur-fond);
}

/* HEADER - Hauteur fixe, ne scroll pas */
.chat-container__header {
  flex-shrink: 0;
  /* Ne pas rétrécir */
  padding: var(--espace-4) var(--espace-6);
  background: linear-gradient(135deg, var(--couleur-principale) 0%, var(--couleur-principale-foncee) 100%);
  color: white;
  box-shadow: var(--ombre-md);
  z-index: 100;
}

/* MESSAGES - Zone scrollable, prend tout l'espace disponible */
.chat-container__messages {
  flex: 1;
  /* Prend tout l'espace restant */
  min-height: 0;
  /* CRUCIAL pour que flex: 1 fonctionne avec overflow */
  overflow-y: auto;
  overflow-x: hidden;
  padding: var(--espace-6);
  background-color: var(--couleur-fond-secondaire);
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  /* Scroll fluide sur iOS */
  transition: background-color 0.3s ease;
}

[data-theme="dark"] .chat-container__messages {
  background-color: var(--dark-couleur-fond) !important;
}

/* INPUT - Hauteur fixe, ne scroll pas */
.chat-container__input {
  flex-shrink: 0;
  /* Ne pas rétrécir */
  padding: var(--espace-4) var(--espace-6);
  background-color: var(--couleur-fond);
  border-top: 1px solid var(--couleur-bordure);
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

[data-theme="dark"] .chat-container__input {
  background-color: var(--dark-couleur-fond) !important;
  border-top-color: rgba(255, 255, 255, 0.1);
}

/* Utilitaires d'espacement */
.mt-1 {
  margin-top: var(--espace-1);
}

.mt-2 {
  margin-top: var(--espace-2);
}

.mt-4 {
  margin-top: var(--espace-4);
}

.mt-6 {
  margin-top: var(--espace-6);
}

.mb-1 {
  margin-bottom: var(--espace-1);
}

.mb-2 {
  margin-bottom: var(--espace-2);
}

.mb-4 {
  margin-bottom: var(--espace-4);
}

.mb-6 {
  margin-bottom: var(--espace-6);
}

.p-1 {
  padding: var(--espace-1);
}

.p-2 {
  padding: var(--espace-2);
}

.p-4 {
  padding: var(--espace-4);
}

.p-6 {
  padding: var(--espace-6);
}