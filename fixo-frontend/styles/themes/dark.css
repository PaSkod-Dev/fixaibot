/* 
   FIXƆ - Thème sombre
   */

[data-theme="dark"] {
  --couleur-texte: var(--dark-couleur-texte);
  --couleur-texte-secondaire: var(--dark-couleur-texte-secondaire);
  --couleur-fond: var(--dark-couleur-fond);
  --couleur-fond-secondaire: var(--dark-couleur-fond-secondaire);
  --couleur-fond-tertiaire: var(--dark-couleur-fond-tertiaire);
  --couleur-bordure: var(--dark-couleur-bordure);

  /* Ajuster les ombres pour le thème sombre */
  --ombre-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.5);
  --ombre-md: 0 4px 6px -1px rgba(0, 0, 0, 0.6), 0 2px 4px -1px rgba(0, 0, 0, 0.5);
  --ombre-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.6), 0 4px 6px -2px rgba(0, 0, 0, 0.5);
  --ombre-doree: 0 4px 14px 0 rgba(212, 175, 55, 0.4);

  /* Messages */
  --message-assistant-fond: var(--dark-couleur-fond-secondaire);
  --message-assistant-bordure: var(--dark-couleur-bordure);
}

/* ───────────────────────────────────────────────────────────────────────────
   EN-TÊTE EN MODE SOMBRE
   ─────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .chat-container__header {
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .chat-container__header::before {
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.15), transparent);
}

/* ───────────────────────────────────────────────────────────────────────────
   ZONE DE MESSAGES EN MODE SOMBRE
   ─────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .chat-container__messages {
  background: linear-gradient(to bottom, #0f172a 0%, #1a202c 100%) !important;
  background-color: var(--dark-couleur-fond) !important;
}

[data-theme="dark"] .chat-container__messages::before {
  background: linear-gradient(to bottom, rgba(26, 54, 93, 0.1), transparent);
}

/* ───────────────────────────────────────────────────────────────────────────
   BARRE DE SAISIE EN MODE SOMBRE
   ─────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .input-bar {
  background: rgba(30, 41, 59, 0.8);
  border-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .input-bar:focus-within {
  border-color: var(--couleur-accent);
  box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3), 0 0 0 3px rgba(212, 175, 55, 0.15);
}

[data-theme="dark"] .input-bar__champ {
  color: var(--dark-couleur-texte);
}

[data-theme="dark"] .input-bar__champ::placeholder {
  color: var(--dark-couleur-texte-secondaire);
}

/* ───────────────────────────────────────────────────────────────────────────
   MESSAGES EN MODE SOMBRE
   ─────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .message--assistant .message__bulle {
  background-color: var(--dark-couleur-fond-secondaire);
  border-color: rgba(255, 255, 255, 0.1);
  color: var(--dark-couleur-texte);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .message--utilisateur .message__bulle {
  background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
  box-shadow: 0 4px 12px rgba(26, 54, 93, 0.4);
}

[data-theme="dark"] .message__etapes {
  border-top-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .message__etape {
  background: rgba(212, 175, 55, 0.1);
  border-left-color: var(--couleur-accent);
}

[data-theme="dark"] .message__etape:hover {
  background: rgba(212, 175, 55, 0.15);
}

[data-theme="dark"] .carte {
  background-color: var(--dark-couleur-fond-secondaire);
  border-color: var(--dark-couleur-bordure);
  color: var(--dark-couleur-texte);
}

[data-theme="dark"] .toast {
  background-color: var(--dark-couleur-fond-secondaire);
  border-color: var(--dark-couleur-bordure);
  color: var(--dark-couleur-texte);
}

/* ───────────────────────────────────────────────────────────────────────────
   BADGES ET INDICATEURS EN MODE SOMBRE
   ─────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .message__bulle span[style*="background: rgba(52, 152, 219"] {
  background: rgba(52, 152, 219, 0.2) !important;
  color: #5DADE2 !important;
  border: 1px solid rgba(52, 152, 219, 0.3);
}

[data-theme="dark"] #mode-actif {
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(184, 150, 12, 0.2));
  border-color: rgba(212, 175, 55, 0.4);
  color: var(--couleur-accent-claire);
}